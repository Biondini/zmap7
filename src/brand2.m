function brand2(catalog) % autogenerated function wrapper
    %  brand2  calculates synthetic b distributions based on
    %  a random permutation of original magnitude values,
    %  it then compares it to original b map using bvalmapt
    %                                                 Ram�n Z��iga 9/2000
    %                          Operates on a
    %
    % turned into function by Celso G Reyes 2017
    
    ZG=ZmapGlobal.Data; % used by get_zmap_globals
    report_this_filefun();
    
    % first create a new catalog with original data changing the year values
    
    lengtha = catalog.Count;
    conca = copy(catalog);
    conca.Date = conca.Date + 500;  % add 500 to years to make it a consecutive sequence
    
    % now change magnitudes by a random permutation
    conca.Magnitude = conca.Magnitude(randperm(lengtha));  % permuted magnitudes

    catalog = catalog.cat(conca);
    
    minnu = 40;  % minimum number of events in each period
    t4 = catalog.Date(end)
    t3 = catalog.Date(lengtha+1);
    t2 = catalog.Date(lengtha);
    t1 = catalog.Date(1);
    cb_go();
   
    
    function callbackfun_001(mysrc,myevt)
        

        callback_tracker(mysrc,myevt,mfilename('fullpath'));
        ZG.inb2=hndl2.Value;
    end
    
    function callbackfun_002(mysrc,myevt)

        callback_tracker(mysrc,myevt,mfilename('fullpath'));
        ZG.inb1=hndl1.Value;
    end
    
    function callbackfun_003(mysrc,myevt)

        callback_tracker(mysrc,myevt,mfilename('fullpath'));
        ra=str2double(freq_field.String);
        freq_field.String=num2str(ra);
    end
    
    function callbackfun_004(mysrc,myevt)

        callback_tracker(mysrc,myevt,mfilename('fullpath'));
        dx=str2double(freq_field2.String);
        freq_field2.String=num2str(dx);
    end
    
    function callbackfun_005(mysrc,myevt)

        callback_tracker(mysrc,myevt,mfilename('fullpath'));
        dy=str2double(freq_field3.String);
        freq_field3.String=num2str(dy);
    end
    
    function callbackfun_006(mysrc,myevt)

        callback_tracker(mysrc,myevt,mfilename('fullpath'));
        close;
        
    end
    
    function cb_go(~,~)
        ZG.inb1=hndl1.Value;
        ZG.inb2=hndl2.Value;
        close;
        ZG.newt2 = catalog;
        warningdlg('this needs updating...');
        bvalmapt(ZmapAnalysisPkg('newt2'));
    end
    
end
